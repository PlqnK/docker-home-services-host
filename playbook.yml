---
- name: 'Home hosts OS configuration'
  hosts: 'home_hosts'
  roles:
    - 'fedora_iot_setup'

- name: 'Cloud hosts OS configuration'
  hosts: 'cloud_hosts'
  roles:
    - 'fedora_server_setup'

- name: 'Containers hosts base configuration'
  hosts: 'containers_hosts'
  roles:
    - 'podman_setup'

- name: 'Common containers'
  hosts: 'containers_hosts'
  roles:
    - 'traefik_containers'
    - 'cockpit_container'
    - 'sshd_rsync_container'
    - 'promtail_container'
    - 'node_exporter_container'
    - 'systemd_exporter_container'

- name: 'Backup containers'
  hosts: 'backup'
  roles:
    - 'rsync_client_container'
    - 'mbsync_container'
    - 'vdirsyncer_container'
    - 'borgmatic_container'
    - 'autorestic_container'

- name: 'Monitoring containers'
  hosts: 'monitoring'
  roles:
    - 'uptime_kuma_container'
    - 'healthchecks_containers'
    - 'grafana_container'
    - 'prometheus_container'
    - 'loki_container'
    - 'syslog_ng_container'

- name: 'Home containers'
  hosts: 'home'
  roles:
    - 'home_assistant_container'

- name: 'Document containers'
  hosts: 'documents'
  roles:
    - 'nextcloud_containers'
    - 'collabora_online_container'
    - 'immich_containers'
    - 'ttrss_containers'
    - 'freshrss_container'

- name: 'Media containers'
  hosts: 'medias'
  roles:
    - 'plex_container'
    - 'tautulli_container'
    - 'calibre_container'
    - 'calibre_web_container'
    - 'komga_container'
    - 'transmission_pod'
    - 'sabnzbd_container'
    - 'flaresolverr_container'
    - 'unpackerr_container'
    - 'recyclarr_container'
    - 'prowlarr_container'
    - 'radarr_container'
    - 'sonarr_container'
    - 'bazarr_container'
    - 'lidarr_container'
    - 'readarr_container'
    - 'mylar_container'
    - 'overseerr_container'

- name: 'Update home hosts OS'
  hosts: 'home_hosts'
  roles:
    - 'fedora_iot_upgrade'

- name: 'Update cloud hosts OS'
  hosts: 'cloud_hosts'
  roles:
    - 'fedora_server_upgrade'
