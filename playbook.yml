---
- name: 'Setup the host OS'
  hosts: 'docker-host'
  become: yes
  vars_files:
    - 'vars/docker-host.yml'
  roles:
    - 'fedora-setup'
    - 'docker-setup'

- name: 'Create/Update the containers'
  hosts: 'docker-host'
  become: yes
  vars_files:
    - 'vars/docker-host.yml'
  roles:
    - 'docker-socket-proxy'
    - 'watchtower'
    - 'traefik'
    - 'organizr'
    - 'transmission'
    - 'sabnzbd'
    - 'jackett'
    - 'nzbhydra'
    - 'radarr'
    - 'sonarr'
    - 'bazarr'
    - 'lidarr'
    - 'lazylibrarian'
    - 'ombi'
    - { role: 'plexmediaserver', vars: { plex_image_tag: 'plexpass' } }
    - 'tautulli'
    - 'calibre-web'
    - { role: 'nextcloud-mariadb', vars: { mariadb_image_tag: '10' } }
    - { role: 'nextcloud-redis', vars: { redis_image_tag: '5' } }
    - { role: 'nextcloud-cron', vars: { nextcloud_image_tag: '16' } }
    - { role: 'nextcloud', vars: { nextcloud_image_tag: '16' } }
    - 'collaboraonline'
