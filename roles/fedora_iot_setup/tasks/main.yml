---
- name: 'Configure OS'
  when: (containers_list is not defined)
  tags: ['os-setup']
  block:
    - name: 'Install packages'
      ansible.builtin.import_tasks: 'packages.yml'

    - name: 'Configure firewalld'
      ansible.builtin.import_tasks: 'firewalld.yml'

    - name: 'Configure services'
      ansible.builtin.import_tasks: 'services.yml'

    - name: 'Configure automounts'
      ansible.builtin.import_tasks: 'automount.yml'
      when: (storage_server is defined)

    - name: 'Configure kernel'
      ansible.builtin.import_tasks: 'kernel.yml'
