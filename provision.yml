---
- name: 'Containers hosts base configuration'
  hosts: 'containers_hosts'
  roles:
    - 'fedora_coreos_setup'
    - 'podman_setup'

- name: 'Common containers'
  hosts: 'containers_hosts'
  roles:
    - 'traefik'
    - 'cockpit'
    - 'sshd_rsync'
    - 'promtail'
    - 'node_exporter'
    - 'systemd_exporter'

- name: 'Backups containers'
  hosts: 'backups'
  roles:
    - 'rsync_servers'
    - 'mbsync'
    - 'vdirsyncer'
    - 'borgmatic'
    - 'autorestic'

- name: 'Monitoring containers'
  hosts: 'monitoring'
  roles:
    - 'uptime_kuma'
    - 'healthchecks'
    - 'grafana'
    - 'prometheus'
    - 'loki'
    - 'syslog_ng'

- name: 'Home containers'
  hosts: 'home'
  roles:
    - 'home_assistant_container'

- name: 'Documents containers'
  hosts: 'documents'
  roles:
    - 'nextcloud'
    - 'collabora_online'
    - 'immich'
    - 'ttrss'
    - 'freshrss'

- name: 'Medias containers'
  hosts: 'medias'
  roles:
    - 'plex_container'
    - 'tautulli_container'
    - 'calibre_container'
    - 'calibre_web_container'
    - 'komga_container'
    - 'transmission_pod'
    - 'sabnzbd_container'
    - 'flaresolverr_container'
    - 'unpackerr_container'
    - 'recyclarr_container'
    - 'prowlarr_container'
    - 'radarr_container'
    - 'sonarr_container'
    - 'bazarr_container'
    - 'lidarr_container'
    - 'readarr_container'
    - 'mylar_container'
    - 'overseerr_container'

- name: 'Update containers hosts OS'
  hosts: 'containers_hosts'
  roles:
    - 'fedora_coreos_upgrade'
